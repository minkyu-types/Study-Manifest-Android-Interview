## â“ Q) í™”ë©´ íšŒì „ê³¼ ê°™ì€ êµ¬ì„± ë³€ê²½ì´ ë°œìƒí•˜ë©´ Activityì— ì–´ë–¤ ë³€í™”ê°€ ìƒê¸°ë‚˜ìš”?

---

ì•ˆë“œë¡œì´ë“œì—ì„œ êµ¬ì„± ë³€ê²½(Configuration Change)ì€ ë‹¤ìŒê³¼ ê°™ì€ ë³€í™”ê°€ Activityì— ë°œìƒí•©ë‹ˆë‹¤:

### ğŸ” ê¸°ë³¸ ë™ì‘: Activity ì¬ìƒì„±

- êµ¬ì„± ë³€ê²½ì´ ë°œìƒí•˜ë©´ ì‹œìŠ¤í…œì€ í˜„ì¬ Activityë¥¼ **ì¢…ë£Œ**í•˜ê³  **ìƒˆë¡œ ì‹¤í–‰**í•©ë‹ˆë‹¤.
- ì´ ê³¼ì •ì€ ë³€ê²½ëœ êµ¬ì„±ì„ ë°˜ì˜í•˜ê¸° ìœ„í•´ **ë¦¬ì†ŒìŠ¤ë¥¼ ë‹¤ì‹œ ë¡œë“œ**í•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.
- ì‹¤í–‰ ìˆœì„œ:
  - `onPause()` â†’ `onStop()` â†’ `onDestroy()` â†’ (Activity ì¢…ë£Œ)
  - `onCreate()` â†’ ... (Activity ì¬ì‹œì‘)

---

### ğŸ”„ ë¦¬ì†ŒìŠ¤ ë‹¤ì‹œ ë¡œë“œ

- ìƒˆ êµ¬ì„±ì— ë§ì¶° ë ˆì´ì•„ì›ƒ, drawable, string ë“±ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ë‹¤ì‹œ ë¡œë”©í•©ë‹ˆë‹¤.
- ì˜ˆ: ë‹¤í¬/ë¼ì´íŠ¸ í…Œë§ˆ, í™”ë©´ ë°©í–¥, ì–¸ì–´ ë“±

---

### ğŸ’¾ ë°ì´í„° ì†ì‹¤ ë°©ì§€

ë‹¤ìŒ ë°©ë²•ì„ í†µí•´ êµ¬ì„± ë³€ê²½ ì‹œ **ìƒíƒœë¥¼ ë³´ì¡´**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. `onSaveInstanceState()` / `onRestoreInstanceState()`:
   - Bundleì— ìƒíƒœ ì €ì¥ ë° ë³µì›
   - ì˜ˆì‹œ:
     ```kotlin
     override fun onSaveInstanceState(outState: Bundle) {
         super.onSaveInstanceState(outState)
         outState.putString("user_input", editText.text.toString())
     }

     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
         setContentView(R.layout.activity_main)
         val restoredInput = savedInstanceState?.getString("user_input")
         editText.setText(restoredInput)
     }
     ```

2. `ViewModel` í™œìš©:
   - êµ¬ì„± ë³€ê²½ê³¼ ê´€ê³„ì—†ì´ ìƒíƒœê°€ ìœ ì§€ë¨
   - ë‚´ë¶€ì ìœ¼ë¡œ `ViewModelStore`ì— ì €ì¥ë˜ì–´ ì¬ìƒì„± ì—†ì´ ë°ì´í„° ìœ ì§€ë¨

---

### ğŸ” êµ¬ì„± ë³€ê²½ì„ ìœ ë°œí•˜ëŠ” ëŒ€í‘œì ì¸ ì‚¬ë¡€

| êµ¬ì„± ë³€ê²½ ì‚¬ë¡€ | ì„¤ëª… |
|----------------|------|
| í™”ë©´ íšŒì „      | ê°€ë¡œ â†” ì„¸ë¡œ ì „í™˜ |
| í…Œë§ˆ ë³€ê²½      | ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ ì „í™˜ |
| ê¸€ê¼´ í¬ê¸° ë³€ê²½ | í…ìŠ¤íŠ¸ ìŠ¤ì¼€ì¼ ì¡°ì • |
| ì–¸ì–´ ë³€ê²½      | ë‹¤êµ­ì–´ ë¦¬ì†ŒìŠ¤ ë¡œë”© |

---

### âš™ï¸ êµ¬ì„± ë³€ê²½ì„ ìˆ˜ë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•

- `AndroidManifest.xml`ì—ì„œ `android:configChanges` ì†ì„±ì„ ì„ ì–¸
  ```xml
  <activity
      android:name=".MainActivity"
      android:configChanges="orientation|screenSize|keyboardHidden" />
  ```
- ì‹œìŠ¤í…œì€ Activityë¥¼ ì¬ìƒì„±í•˜ì§€ ì•Šê³ , ëŒ€ì‹  `onConfigurationChanged()` í˜¸ì¶œ
  ```kotlin
  override fun onConfigurationChanged(newConfig: Configuration) {
      super.onConfigurationChanged(newConfig)
      if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
          // ê°€ë¡œ ëª¨ë“œ ì²˜ë¦¬
      } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
          // ì„¸ë¡œ ëª¨ë“œ ì²˜ë¦¬
      }
  }
  ```

---

### ğŸ§  ìš”ì•½

- êµ¬ì„± ë³€ê²½ì€ ê¸°ë³¸ì ìœ¼ë¡œ Activity ì¬ìƒì„±ì„ ìœ ë°œí•¨
- ìƒíƒœ ì†ì‹¤ ë°©ì§€ë¥¼ ìœ„í•´ Bundle ë˜ëŠ” ViewModelì„ ì‚¬ìš©
- í•„ìš” ì‹œ configChanges ì†ì„±ì„ ì´ìš©í•´ ì¬ìƒì„±ì„ ë°©ì§€í•˜ê³  ìˆ˜ë™ ì²˜ë¦¬ ê°€ëŠ¥


---

## â“ ì‹¤ì „ ì§ˆë¬¸

Q) êµ¬ì„± ë³€ê²½ìœ¼ë¡œ ì¸í•œ Activity ì¬ìƒì„± ì¤‘ ë°œìƒí•˜ëŠ” ë°ì´í„° ì†ì‹¤ì„
ì–´ë–»ê²Œ ë³µì› ë° ë³´ì¡´í•  ìˆ˜ ìˆìœ¼ë©°, UI ìƒíƒœë¥¼ ì–´ë–»ê²Œ ë³µêµ¬ì‹œí‚¤ëŠ”ì§€
ì„¤ëª…í•´ ì£¼ì„¸ìš”.

êµ¬ì„± ë³€ê²½(Configuration Change) ì‹œ ì‹œìŠ¤í…œì€ ê¸°ì¡´ Activityë¥¼ ì¢…ë£Œí•˜ê³  ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ Activityê°€ ì¬ìƒì„±ë˜ê¸° ë•Œë¬¸ì—, **ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê°’ì´ë‚˜ UI ìƒíƒœê°€ ì†ì‹¤ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ì´ë¥¼ ë³µì› ë° ë³´ì¡´í•˜ê¸° ìœ„í•œ ëŒ€í‘œì ì¸ ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

---

### âœ… 1. `onSaveInstanceState()`ì™€ `onRestoreInstanceState()` í™œìš©

- ì‹œìŠ¤í…œì€ Activityê°€ ì¢…ë£Œë˜ê¸° ì „ `onSaveInstanceState()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ìƒíƒœë¥¼ `Bundle`ì— ì €ì¥í•©ë‹ˆë‹¤.
- ìƒˆë¡œ ìƒì„±ëœ ActivityëŠ” ì´ `Bundle`ì„ í†µí•´ ë³µì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```kotlin
override fun onSaveInstanceState(outState: Bundle) {
    super.onSaveInstanceState(outState)
    outState.putString("user_input", editText.text.toString())
}

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)
    val restored = savedInstanceState?.getString("user_input")
    editText.setText(restored)
}
```

- ë³µì› ìœ„ì¹˜ëŠ” `onCreate()` ë˜ëŠ” `onRestoreInstanceState()`ì—ì„œ ì„ íƒí•  ìˆ˜ ìˆìœ¼ë©°,
  `onRestoreInstanceState()`ëŠ” `onStart()` ì§ì „ì— í˜¸ì¶œë©ë‹ˆë‹¤.

---

### âœ… 2. `ViewModel` ì‚¬ìš©

- ViewModelì€ `Activity`ë³´ë‹¤ **ê¸´ ìƒëª…ì£¼ê¸°**ë¥¼ ê°€ì§€ë©°, êµ¬ì„± ë³€ê²½ì—ë„ ìœ ì§€ë©ë‹ˆë‹¤.
- í™”ë©´ íšŒì „ ì‹œ ViewModelì´ ìœ ì§€ë˜ë¯€ë¡œ, ë„¤íŠ¸ì›Œí¬ ì‘ë‹µì´ë‚˜ ì‚¬ìš©ì ì…ë ¥ ê°’ì„ ê·¸ëŒ€ë¡œ ë³´ì¡´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```kotlin
class MyViewModel : ViewModel() {
    val userInput = MutableLiveData<String>()
}

// Activity
val viewModel by viewModels<MyViewModel>()
viewModel.userInput.observe(this) { text ->
    editText.setText(text)
}
```

---

### âœ… 3. `configChanges`ë¥¼ í†µí•œ ìˆ˜ë™ ì²˜ë¦¬

- AndroidManifest.xmlì— `android:configChanges`ë¥¼ ì„ ì–¸í•˜ë©´ ì‹œìŠ¤í…œì´ Activityë¥¼ **ì¬ìƒì„±í•˜ì§€ ì•Šê³ ** `onConfigurationChanged()`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
- ë³µì¡í•œ UI ë³µì› ë¡œì§ì´ í•„ìš” ì—†ëŠ” ê²½ìš° ìœ ìš©í•©ë‹ˆë‹¤.

```xml
<activity
    android:name=".MainActivity"
    android:configChanges="orientation|screenSize" />
```

```kotlin
override fun onConfigurationChanged(newConfig: Configuration) {
    super.onConfigurationChanged(newConfig)
    // êµ¬ì„± ë³€ê²½ ì§ì ‘ ì²˜ë¦¬
}
```

| ë°©ë²• | íŠ¹ì§• | ì¥ì  |
|------|------|------|
| `onSaveInstanceState()` | Bundle ê¸°ë°˜ ì €ì¥ | ê°„ë‹¨í•œ ë°ì´í„° ë³´ì¡´ì— ì í•© |
| `ViewModel` | Activityë³´ë‹¤ ê¸´ ìƒëª…ì£¼ê¸° | êµ¬ì¡°í™”ëœ ìƒíƒœ ê´€ë¦¬ì— ìœ ë¦¬ |
| `configChanges` | ì‹œìŠ¤í…œ ì¬ìƒì„± ë°©ì§€ | ìˆ˜ë™ ì²˜ë¦¬ ì‹œ ì í•© |


ì…ë ¥ê°’ì²˜ëŸ¼ ì§§ì€ ë°ì´í„°ëŠ” Bundle, ë¦¬ìŠ¤íŠ¸ë‚˜ ë¹„ë™ê¸° ì²˜ë¦¬ ì¤‘ì¸ ë°ì´í„°ëŠ” ViewModelë¡œ ë¶„ë¦¬í•˜ë©´ ì•ˆì •ì ì´ê³  ìœ ì§€ë³´ìˆ˜ì— ìš©ì´í•©ë‹ˆë‹¤.

---
