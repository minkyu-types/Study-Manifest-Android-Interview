❓ Q) 42. Dp와 Sp의 차이점은 무엇인가요

---

### 📌 개요
- **dp(density-independent pixels)**: 디스플레이의 **밀도에 독립적**인 픽셀 단위  
- **sp(scale-independent pixels)**: **dp와 동일**하지만, 여기에 **사용자 글꼴 크기 설정(폰트 스케일)** 이 반영됨  

---

### 🔑 차이점
1. **dp**
   - 주로 **레이아웃 요소(버튼, 마진, 패딩)** 크기 지정에 사용  
   - 화면 해상도와 관계없이 **일관된 UI 크기**를 유지  

2. **sp**
   - 주로 **텍스트 크기 지정**에 사용  
   - 기기 해상도뿐만 아니라 **사용자가 설정한 글꼴 크기**를 반영  
   - 접근성(Accessibility) 보장에 필수  

---

### 🧭 사용 가이드
- **UI 레이아웃 요소** → `dp` 사용  
- **텍스트 크기** → `sp` 사용  

---

### 🛠️ 면 깨짐 방지 전략
사용자가 시스템 글꼴 크기를 크게 늘리면 `sp` 단위로 인해 텍스트 요소가 경계를 넘어 커질 수 있습니다.  
이를 방지하기 위한 전략은 다음과 같습니다:

1. **콘텐츠를 적절하게 감싸기 (Wrap Content Properly)**  
   - `TextView`, `Button`과 같은 텍스트 기반 컴포넌트를 `wrap_content`로 설정  
   - 텍스트 크기에 따라 컨테이너가 확장되어 잘림/오버플로우 방지  

   ```xml
   <TextView
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:textSize="16sp"
       android:text="샘플 텍스트" />
   ```

2. **`minLines`, `maxLines` + `ellipsize` 활용**  
   - 텍스트 확장 동작을 제어하고, 레이아웃 안정성 확보  

   ```xml
   <TextView
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:textSize="16sp"
       android:maxLines="2"
       android:ellipsize="end"
       android:text="이것은 제대로 처리되지 않으면 레이아웃을 깨뜨릴 수 있는 긴 샘플 텍스트입니다." />
   ```

3. **중요한 UI 컴포넌트에 고정 크기 사용**  
   - 버튼 등은 `dp`로 고정 크기 지정  
   - 단, 내부 텍스트는 `sp`를 신중히 사용  

   ```xml
   <Button
       android:layout_width="100dp"
       android:layout_height="50dp"
       android:textSize="14sp"
       android:text="버튼" />
   ```

4. **극단적인 글꼴 크기로 테스트**  
   - 시스템 설정에서 **가장 큰 글꼴 크기**로 테스트해 깨짐 여부 확인  

5. **ConstraintLayout 제약 조건 활용**  
   - 텍스트가 커져도 다른 UI와 겹치지 않도록 유연한 배치  

   ```xml
   <androidx.constraintlayout.widget.ConstraintLayout
       xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:app="http://schemas.android.com/apk/res-auto"
       android:layout_width="match_parent"
       android:layout_height="wrap_content">

       <TextView
           android:id="@+id/sampleText"
           android:layout_width="0dp"
           android:layout_height="wrap_content"
           android:textSize="16sp"
           app:layout_constraintStart_toStartOf="parent"
           app:layout_constraintEnd_toEndOf="parent"
           app:layout_constraintTop_toTopOf="parent"
           android:text="동적 레이아웃 예제" />
   </androidx.constraintlayout.widget.ConstraintLayout>
   ```

6. **Sp 대신 Dp 사용 (특수 케이스)**  
   - 일부 팀은 레이아웃 깨짐 방지를 위해 텍스트에 `dp` 사용  
   - 그러나 이는 접근성을 저해할 수 있으므로 권장되지 않음  

---

### ✨ AutoSize (자동 텍스트 크기 조정)
안드로이드에서는 **AutoSize TextView** 기능을 제공하여, 공간에 맞게 글자 크기를 자동 조정할 수 있습니다.

- **설정 방법**:  
  XML 속성 또는 코드로 `setAutoSizeTextTypeWithDefaults()` 사용  

  ```xml
  <TextView
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:autoSizeTextType="uniform"
      android:autoSizeMinTextSize="12sp"
      android:autoSizeMaxTextSize="100sp"
      android:autoSizeStepGranularity="2sp"
      android:text="자동 크기 조정 텍스트" />
  ```

- **장점**:
  - 제한된 공간에서도 텍스트 잘림 방지  
  - 다양한 화면 크기 및 글꼴 설정에 유연하게 대응  

---

### 💬 실전 질문
**Q1) 텍스트 크기에 Sp를 사용할 때 발생할 수 있는 잠재적인 레이아웃 깨짐 문제를 경험해 보거나 해결해 본 적이 있나요**

**A)**
- 키오스크 개발시, 커스텀으로 해상도를 확장한 경우
- 일반 플래그쉽 휴대전화의 경우, 가로가 360dp ~ 431dp 지만,, 폴드나 플립의 경우 가로길이가 341dp 로 작아서 대응이 쉽지 않음
- 지하철 앱을 만드는 경우, 가장 긴 역의 이름은 "동대문역사문화공원역" 이고 가장 짧은 역 이름은 "신사" 역으로 글자 수 대응이 어려워 AutoSize TextView 를 사용하여 동적으로 길이 조정
