## 📂 카테고리 2: Jetpack 라이브러리

Jetpack은 안드로이드 앱 개발 시 마주할 수 있는 다양한 문제를 해결하기 위해 **Google에서 제공하는 라이브러리 및 툴 모음**입니다.  
생명주기 관리, UI 내비게이션, 백그라운드 작업, 데이터 저장소 등을 포함하며, 최신 개발 관행과 통합되어 앱 구축을 간소화합니다.

### ✅ Jetpack의 특징
- **모듈식 제공**: 필요한 라이브러리만 선택적으로 포함 가능
- **유연성**: ViewModel, Navigation, Room 등 상황에 맞게 조합 가능
- **보완적 역할**: 안드로이드 핵심 기능을 확장하고 모범 사례를 준수
- **선택적 사용**: 반드시 사용해야 하는 것은 아니며, 상황에 따라 대체 솔루션도 가능

> 👉 공식 문서: [Android Jetpack](https://developer.android.com/jetpack)

---

## ❓ Q) 49. AppCompat 라이브러리란 무엇인가요

### 📖 개요
AppCompat은 Jetpack의 일부로, **하위 호환성(Backward Compatibility)** 을 제공하는 지원 라이브러리입니다.  
안드로이드의 다양한 **버전 간 UI 및 기능 일관성**을 유지하는 것을 목표로 합니다.

### 🔑 주요 기능
1. **하위 버전 호환성**  
   - 최신 안드로이드 기능을 오래된 기기에서도 동일하게 사용할 수 있도록 지원  
   - 예: `Toolbar`, `Vector Drawable`, `Material Components` 등

2. **일관된 테마 및 스타일**  
   - `Theme.AppCompat` 를 통해 일관된 디자인 언어 제공  
   - Material Design을 모든 버전에서 적용 가능

3. **API 레벨별 분기 최소화**  
   - 개발자가 직접 버전에 따른 조건 분기를 하지 않아도 됨  
   - AppCompat이 내부적으로 적절한 구현을 선택

### 🛠️ 코드 예시
```kotlin
// AppCompatActivity 사용 예시
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        // ActionBar를 AppCompat 스타일로 사용
        supportActionBar?.title = "AppCompat Demo"
    }
}
```

### 🌟 장점
- 다양한 안드로이드 버전에서 **일관된 사용자 경험 제공**  
- **개발 생산성 향상**: 버전별 예외 처리가 크게 줄어듦  
- **Material Design 지원**을 통한 현대적 UI 구현 가능  

---

## 💡 정리
AppCompat은 Jetpack에서 가장 널리 쓰이는 핵심 라이브러리 중 하나로,  
**UI 호환성 + 버전별 일관성**을 보장하여 안드로이드 앱의 신뢰성과 유지보수성을 크게 높여줍니다.

---

## 💬 실전 질문
**Q) AppCompat 라이브러리는 하위 안드로이드 버전에서 Material Design 지원을 어떻게 가능하게 하며, 이와 같은 동작을 기반으로 하는 주요 UI 컴포넌트에는 무엇이 있나요**

### ✅ 핵심 동작 원리 (하위 버전에서 Material을 “같게” 보이게 하는 방법)
1. **AppCompat 테마 엔진**
   - `Theme.AppCompat`(또는 `Theme.Material3.*`/`Theme.MaterialComponents.*` 계열의 AppCompat 기반 테마)를 통해 **일관된 색상, Typography, Shape**를 하위 버전에도 적용합니다.
   - 다크모드도 `AppCompatDelegate` 기반의 **DayNight**로 API 21 미만까지 자동 대응.

2. **View Inflation 치환(AppCompatViewInflater)**
   - XML에서 표준 위젯을 선언해도 런타임에 `AppCompatTextView`, `AppCompatButton`, `AppCompatImageView` 등 **AppCompat 위젯으로 자동 대체**하여 하위 버전에서도 **Tint, Ripple, StateList** 등 머티리얼 표현을 동일하게 제공합니다.

3. **Drawable/Tint 호환 레이어**
   - `VectorDrawableCompat`/`AppCompatDrawableManager`를 통해 **벡터 드로어블, Tint(색상 필터)** 를 Lollipop 미만에서도 동일하게 렌더링합니다.
   - 배경/아이콘/체크 상태 등 머티리얼 표현(pressed/disabled/ripple)을 **버전 분기 없이** 유지.

4. **Toolbar/ActionBar 호환**
   - `Toolbar`를 `ActionBar`처럼 동작시키는 AppCompat 래퍼로 **머티리얼 AppBar 패턴**(스크롤, Collapsing, 메뉴 Tint)을 하위 버전에도 제공합니다.

5. **Material Components의 AppCompat 의존**
   - `com.google.android.material:*` 컴포넌트는 AppCompat 테마/인프라에 의존해 **머티리얼 디자인 시스템(색/타이포/모양/모션)** 을 모든 API 레벨에 일관 적용합니다.

---

### 🧩 이 동작에 기반한 주요 UI 컴포넌트

#### A. AppCompat 표준 위젯(자동 치환 대상)
- `AppCompatTextView`, `AppCompatEditText`, `AppCompatImageView`, `AppCompatImageButton`
- `AppCompatButton`, `AppCompatCheckBox`, `AppCompatRadioButton`, `AppCompatToggleButton`
- `AppCompatSpinner`, `AppCompatSeekBar`, `AppCompatRatingBar`, `SwitchCompat` 등  
→ **Tint/State/Ripple/Typeface** 일관 적용, 레이아웃/스타일 재사용 용이

#### B. Material Components (AppCompat 테마 기반)
- **항해/구조**: `MaterialToolbar`, `AppBarLayout`, `CollapsingToolbarLayout`, `NavigationView`, `BottomNavigationView`, `TabLayout`
- **입력/폼**: `TextInputLayout`+`TextInputEditText`, `MaterialButton`, `MaterialAutoCompleteTextView`, `Slider`
- **피드백/디스플레이**: `Snackbar`, `MaterialCardView`, `Chip`, `ChipGroup`, `BadgeDrawable`
- **액션/플로팅**: `FloatingActionButton`  
→ **색상 체계(ColorScheme), Elevation/Shape, Motion** 규칙이 하위 버전까지 동일하게 반영

---

### 🛠️ 설정 예시 (버전 분기 없이 머티리얼 유지)

#### 1) 의존성
```groovy
dependencies {
    implementation "androidx.appcompat:appcompat:1.7.0"
    implementation "com.google.android.material:material:1.12.0" // Material3 포함
}
```

#### 2) 테마 (Material3 + DayNight, AppCompat 기반)
```xml
<!-- res/values/themes.xml -->
<style name="AppTheme" parent="Theme.Material3.DayNight.NoActionBar">
    <!-- 머티리얼 컬러 스킴/타이포/쉐이프를 일괄 적용 -->
    <item name="android:statusBarColor">@android:color/transparent</item>
    <item name="android:windowLightStatusBar">false</item>
</style>
```

#### 3) Activity (다크모드/VectorCompat)
```kotlin
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        // 시스템 다크/라이트 모드에 따라 자동 전환
        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_FOLLOW_SYSTEM)

        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        // AppCompat 기반 Toolbar를 ActionBar처럼 사용
        setSupportActionBar(findViewById(R.id.toolbar))
    }
}
```

#### 4) 레이아웃 (AppCompat/Material 위젯 혼합)
```xml
<!-- res/layout/activity_main.xml -->
<com.google.android.material.appbar.MaterialToolbar
    android:id="@+id/toolbar"
    android:layout_width="match_parent"
    android:layout_height="?attr/actionBarSize"
    app:title="Material on All APIs" />

<com.google.android.material.textfield.TextInputLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <com.google.android.material.textfield.TextInputEditText
        android:hint="Email" />
</com.google.android.material.textfield.TextInputLayout>

<!-- 표준 선언이더라도 AppCompatViewInflater가 AppCompat 위젯으로 치환 -->
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Submit" />
```

---

### 📌 면접 포인트 (버전별 분기 관점)
- **API < 21**: Vector/Ripple/Tint가 기본 미지원 → AppCompat가 `VectorDrawableCompat`, `RippleDrawable` 대체, `tint` 오버레이 등으로 **동일한 룩앤필** 제공
- **API 21~28**: 일부 동작이 기기별 상이 → AppCompat가 **일관된 테마/위젯 동작**으로 갭 보정
- **API 29+**: 시스템 다크모드 → `AppCompatDelegate`의 **DayNight**로 하위까지 **동일 정책** 유지

---

### 🧾 결론
AppCompat은 **테마 엔진 + 위젯 치환 + Drawable/Tint 호환 + Toolbar 래핑**으로  
하위 안드로이드 버전에서도 **Material Design을 거의 동일한 경험으로 제공**합니다.  
이 인프라 위에서 **AppCompat 위젯과 Material Components** 전반이 안정적으로 동작하며,  
개발자는 **버전 분기 최소화**로 유지보수성을 높일 수 있습니다.
