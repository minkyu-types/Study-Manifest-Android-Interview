## â“ Q) 41. RecyclerViewëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ì–´ë–»ê²Œ ì‘ë™í•˜ë‚˜ìš”?

---

### ğŸ“Œ ê°œìš”
`RecyclerView`ëŠ” **ìƒˆë¡œìš´ ì•„ì´í…œ ë·°ë¥¼ ë°˜ë³µ ì¸í”Œë ˆì´íŠ¸í•˜ì§€ ì•Šê³  ì¬í™œìš©**í•˜ì—¬ ëŒ€ê·œëª¨ ë°ì´í„° ì…‹ì„ íš¨ìœ¨ì ìœ¼ë¡œ í‘œì‹œí•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ì´ íš¨ìœ¨ì„±ì€ **ViewHolder íŒ¨í„´**ê³¼ **ê°ì²´ í’€(object pool) ìœ ì‚¬ ë©”ì»¤ë‹ˆì¦˜(RecycledViewPool)**ì„ í†µí•´ ë‹¬ì„±ë©ë‹ˆë‹¤.

---

### âš™ï¸ ë‚´ë¶€ ë©”ì»¤ë‹ˆì¦˜ í•µì‹¬ ê°œë…
- **ë·° ì¬í™œìš©(Recycling Views)**: í™”ë©´ì„ ë²—ì–´ë‚œ ë·°ëŠ” ì†Œë©¸ë˜ì§€ ì•Šê³  `RecycledViewPool`ì— ë³´ê´€ë˜ì—ˆë‹¤ê°€ í•„ìš”í•œ ê²½ìš° ì¬ì‚¬ìš©ë©ë‹ˆë‹¤.
- **ViewHolder íŒ¨í„´**: ë°”ì¸ë”© ì¤‘ ë°˜ë³µì ì¸ `findViewById()`ë¥¼ í”¼í•˜ê¸° ìœ„í•´ ì•„ì´í…œ ë·° ì°¸ì¡°ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤.
- **Adapterì˜ ì—­í• **: ë³´ì´ëŠ” í•­ëª©ë§Œ `onBindViewHolder()`ë¡œ ì—…ë°ì´íŠ¸ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.
- **RecycledViewPool**: ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë·°ë¥¼ ì €ì¥í•˜ëŠ” í’€ë¡œ, ìœ ì‚¬í•œ ë·° ìœ í˜• ê°„ ì¬ì‚¬ìš©ì„ í†µí•´ ë©”ëª¨ë¦¬ ìµœì í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

### ğŸ” ì¬í™œìš© ë™ì‘ íë¦„
1. **ìŠ¤í¬ë¡¤ ì‹œ ê°€ì‹œì„± ë³€í™”**: í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°„ í•­ëª©ì€ ë¶„ë¦¬ë˜ë©° í’€ì— ì¶”ê°€ë©ë‹ˆë‹¤.
2. **ë¦¬ë°”ì¸ë”©**: ìƒˆ í•­ëª©ì´ ë“¤ì–´ì˜¤ë©´ í’€ì—ì„œ ì í•©í•œ ë·°ë¥¼ ì°¾ì•„ **ìƒˆ ë°ì´í„°ë¡œ ë°”ì¸ë”©**í•˜ì—¬ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤.
3. **í’€ì— ì í•©í•œ ë·°ê°€ ì—†ì„ ë•Œ**: `onCreateViewHolder()`ë¡œ **ìƒˆ ë·° ì¸í”Œë ˆì´íŠ¸**.
4. **íš¨ìœ¨ì  ë©”ëª¨ë¦¬ ì‚¬ìš©**: ì¬í™œìš©ìœ¼ë¡œ ë©”ëª¨ë¦¬ í• ë‹¹/GCë¥¼ ìµœì†Œí™”í•©ë‹ˆë‹¤.

---

#### RecyclerView Adapter Example
```kotlin
class MyAdapter(private val dataList: List<String>) : RecyclerView.Adapter<MyAdapter.MyViewHolder>() {

    // ViewHolder í´ë˜ìŠ¤: ì•„ì´í…œ ë·°ì˜ ì°¸ì¡°ë¥¼ ì €ì¥
    class MyViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {
        val textView: TextView = itemView.findViewById(R.id.textView)
    }

    // ViewHolder ìƒì„±: ìƒˆ ë·° ì¸í”Œë ˆì´ì…˜
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyViewHolder {
        val view = LayoutInflater.from(parent.context).inflate(R.layout.item_layout, parent, false)
        return MyViewHolder(view)
    }

    // ViewHolderì— ë°ì´í„° ë°”ì¸ë”©
    override fun onBindViewHolder(holder: MyViewHolder, position: Int) {
        holder.textView.text = dataList[position]
    }

    // ë°ì´í„° ì…‹ í¬ê¸° ë°˜í™˜
    override fun getItemCount(): Int = dataList.size
}
```

#### (ì—¬ëŸ¬ ì•„ì´í…œ ìœ í˜•) ë°ì´í„° í´ë˜ìŠ¤
```kotlin
// ë‹¤ì–‘í•œ ì•„ì´í…œ ìœ í˜•ì„ ë‚˜íƒ€ë‚´ëŠ” ë°ì´í„° í´ë˜ìŠ¤ (Sealed Class ì‚¬ìš©)
sealed class ListItem {
    data class Header(val title: String) : ListItem()
    data class Content(val text: String) : ListItem()
}
```

#### (ì—¬ëŸ¬ ì•„ì´í…œ ìœ í˜•) ViewHolderì˜ bind ì˜ˆì‹œ
```kotlin
class ContentViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {
    private val content: TextView = itemView.findViewById(R.id.contentText)

    fun bind(item: ListItem.Content) {
        content.text = item.text
    }
}
```

#### ê·¸ë¦¼ 92. DiffUtil Callback Implementation
```kotlin
class MyDiffUtilCallback : DiffUtil.ItemCallback<MyItem>() {
    override fun areItemsTheSame(oldItem: MyItem, newItem: MyItem): Boolean {
        // ì•„ì´í…œì´ ë™ì¼í•œ ë°ì´í„°ë¥¼ ë‚˜íƒ€ë‚´ëŠ”ì§€ í™•ì¸
        return oldItem.id == newItem.id
    }

    override fun areContentsTheSame(oldItem: MyItem, newItem: MyItem): Boolean {
        // ì•„ì´í…œì˜ ë‚´ìš©ì´ ë™ì¼í•œì§€ í™•ì¸
        return oldItem == newItem
    }
}
```

### ğŸ§© ì—¬ëŸ¬ ì•„ì´í…œ ìœ í˜• êµ¬í˜„ ë‹¨ê³„ (ì›ë¬¸ ìš”ì•½)
- **ì•„ì´í…œ ìœ í˜• ì •ì˜** â†’ `getItemViewType()` ì¬ì •ì˜ â†’ ìœ í˜•ë³„ **ViewHolder/ë ˆì´ì•„ì›ƒ** êµ¬ì„± â†’ ì˜¬ë°”ë¥¸ ë°”ì¸ë”©.

---
### â• ì¶”ê°€ ì‹¬í™” ê°œë…

#### 1) DiffUtil
- ë‘ ë¦¬ìŠ¤íŠ¸ ê°„ì˜ ì°¨ì´ë¥¼ ê³„ì‚°í•´, ë³€ê²½ëœ ë¶€ë¶„ë§Œ ê°±ì‹ í•©ë‹ˆë‹¤.
- **ì¥ì **: ë¶ˆí•„ìš”í•œ `notifyDataSetChanged()` í˜¸ì¶œì„ ì¤„ì—¬  
  **ì• ë‹ˆë©”ì´ì…˜/ì„±ëŠ¥ ìµœì í™”**ì— íš¨ê³¼ì ì…ë‹ˆë‹¤.

```kotlin
val diffCallback = object : DiffUtil.ItemCallback<MyModel>() {
    override fun areItemsTheSame(oldItem: MyModel, newItem: MyModel): Boolean =
        oldItem.id == newItem.id

    override fun areContentsTheSame(oldItem: MyModel, newItem: MyModel): Boolean =
        oldItem == newItem
}
```

---

#### 2) ListAdapter
- `RecyclerView.Adapter`ë¥¼ ìƒì†í•œ ì¶”ìƒ í´ë˜ìŠ¤.
- ë‚´ë¶€ì ìœ¼ë¡œ **DiffUtil**ì„ ìë™ìœ¼ë¡œ ì‚¬ìš©í•´,  
  `submitList()` í˜¸ì¶œë§Œìœ¼ë¡œ ê°±ì‹ ì´ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

```kotlin
class MyListAdapter :
    ListAdapter<MyModel, MyViewHolder>(diffCallback) {

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyViewHolder =
        MyViewHolder.create(parent)

    override fun onBindViewHolder(holder: MyViewHolder, position: Int) =
        holder.bind(getItem(position))
}
```

---

#### 3) ConcatAdapter
- ì—¬ëŸ¬ ê°œì˜ ì–´ëŒ‘í„°ë¥¼ **í•˜ë‚˜ì˜ RecyclerView**ì— ë¶™ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í—¤ë”/ë³¸ë¬¸/í‘¸í„°ë¥¼ ë…ë¦½ëœ ì–´ëŒ‘í„°ë¡œ ë¶„ë¦¬í•´ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```kotlin
val headerAdapter = HeaderAdapter()
val contentAdapter = ContentAdapter()
val footerAdapter = FooterAdapter()

recyclerView.adapter = ConcatAdapter(
    headerAdapter,
    contentAdapter,
    footerAdapter
)
```

---

#### 4) Multi ViewHolder (ë©€í‹° íƒ€ì… ì•„ì´í…œ)
- **ì—¬ëŸ¬ ë·° íƒ€ì…**ì„ í•˜ë‚˜ì˜ ì–´ëŒ‘í„°ì—ì„œ ì²˜ë¦¬.
- `getItemViewType()`ì—ì„œ íƒ€ì… ë¶„ê¸° â†’ ì¸ë±ìŠ¤ ê¼¬ì„ ë°©ì§€.

```kotlin
sealed class UiModel {
    data class Header(val title: String) : UiModel()
    data class Item(val id: Long, val name: String) : UiModel()
    data class Footer(val info: String) : UiModel()
}

class MultiAdapter :
    ListAdapter<UiModel, RecyclerView.ViewHolder>(diff) {

    companion object {
        private const val TYPE_HEADER = 1
        private const val TYPE_ITEM = 2
        private const val TYPE_FOOTER = 3

        val diff = object : DiffUtil.ItemCallback<UiModel>() {
            override fun areItemsTheSame(old: UiModel, new: UiModel): Boolean =
                when {
                    old is UiModel.Header && new is UiModel.Header -> true
                    old is UiModel.Footer && new is UiModel.Footer -> true
                    old is UiModel.Item && new is UiModel.Item -> old.id == new.id
                    else -> false
                }

            override fun areContentsTheSame(old: UiModel, new: UiModel): Boolean = old == new
        }
    }

    override fun getItemViewType(position: Int): Int = when (getItem(position)) {
        is UiModel.Header -> TYPE_HEADER
        is UiModel.Item   -> TYPE_ITEM
        is UiModel.Footer -> TYPE_FOOTER
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder =
        when (viewType) {
            TYPE_HEADER -> HeaderVH(...)
            TYPE_ITEM   -> ItemVH(...)
            else        -> FooterVH(...)
        }

    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, pos: Int) {
        when (val model = getItem(pos)) {
            is UiModel.Header -> (holder as HeaderVH).bind(model)
            is UiModel.Item   -> (holder as ItemVH).bind(model)
            is UiModel.Footer -> (holder as FooterVH).bind(model)
        }
    }
}
```


---

### ğŸš€ Pro Tips for Mastery (ì›ë¬¸)
- **ì„±ëŠ¥ í–¥ìƒ**: `ListAdapter`ì™€ `DiffUtil`ì„ ì‚¬ìš©í•´ ë³€ê²½ì ë§Œ ë°˜ì˜. ì „ì²´ `notifyDataSetChanged()`ë¥¼ í”¼í•˜ê³  ìµœì†Œ ì—…ë°ì´íŠ¸(ì‚½ì…/ì‚­ì œ/ìˆ˜ì •)ë§Œ ì ìš©

---

### âš ï¸ ì¸ë±ìŠ¤ ì¶©ëŒ ë°©ì§€ & ì‹¤ìˆ˜ ì˜ˆì‹œ

#### ì‹¤ìˆ˜ & í•´ê²°ì±…
- âŒ `position`ì„ ë°ì´í„° ì¸ë±ìŠ¤ë¡œ ì§ì ‘ ì‚¬ìš© â†’ í—¤ë” ì¶”ê°€ ì‹œ ì „ë¶€ +1 í•„ìš”  
  âœ… í•´ê²°: **Multi ViewType ë˜ëŠ” ConcatAdapter**ë¡œ ì˜¤í”„ì…‹ ì œê±°

- âŒ `adapterPosition` ì‚¬ìš© ì¤‘ ì• ë‹ˆë©”ì´ì…˜ ì‹œ `NO_POSITION` í¬ë˜ì‹œ  
  âœ… í•´ê²°: `bindingAdapterPosition` ì²´í¬ í›„ != `NO_POSITION`ì¼ ë•Œë§Œ ì‚¬ìš©

- âŒ `notifyDataSetChanged()` ë‚¨ë°œ â†’ ì• ë‹ˆë©”ì´ì…˜ ë¶•ê´´  
  âœ… í•´ê²°: `ListAdapter + DiffUtil` ì‚¬ìš©, ë³€ê²½ì ë§Œ `submitList()`

- âŒ ì•„ì´í…œ í´ë¦­ ì‹œ í¬ì§€ì…˜ ê¸°ë°˜ ì°¸ì¡°  
  âœ… í•´ê²°: **ëª¨ë¸ ìì²´ë¥¼ ì½œë°±ì— ì „ë‹¬**

```kotlin
class ItemVH(val binding: RowItemBinding): RecyclerView.ViewHolder(binding.root) {
    fun bind(model: UiModel.Item, onClick: (UiModel.Item) -> Unit) {
        binding.title.text = model.name
        binding.root.setOnClickListener { onClick(model) } // position ì°¸ì¡° ì œê±°
    }
}
```

### ğŸ“ ê²°ë¡ 
- RecyclerViewëŠ” **ë·° ì¬ì‚¬ìš© + DiffUtil ìµœì í™” + ë‹¤ì–‘í•œ ì–´ëŒ‘í„° ì „ëµ**ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.
- ì¸ë±ìŠ¤ ì¶©ëŒì„ ë°©ì§€í•˜ë ¤ë©´:
  - ë‹¨ì¼ ì–´ëŒ‘í„° + sealed class (ë©€í‹° ë·°íƒ€ì…)  
  - ConcatAdapter (í—¤ë”/í‘¸í„° ë¶„ë¦¬)  
- ë‘ íŒ¨í„´ ì¤‘ ìƒí™©ì— ë§ëŠ” ë°©ì‹ì„ ì„ íƒí•˜ë©´, **í¬ì§€ì…˜ ê¼¬ì„ ìì²´ë¥¼ ì—†ì•¨ ìˆ˜ ìˆìŠµë‹ˆë‹¤**.

---

### ğŸ’¬ ì‹¤ì „ ì§ˆë¬¸
**Q1_ RecyclerViewê°€ ListViewë³´ë‹¤ ì„±ëŠ¥ì´ ì¢‹ì€ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?**

**A)**
  - RecyclerViewëŠ” ViewHolder íŒ¨í„´ì„ ê°•ì œí•˜ê³ ,  
    `LayoutManager`ë¡œ ë ˆì´ì•„ì›ƒì„ ìœ ì—°í•˜ê²Œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
  - ë˜í•œ, DiffUtilê³¼ ê°™ì€ ë„êµ¬ë¡œ ë³€ê²½ì ë§Œ ê°±ì‹  ê°€ëŠ¥í•´,  
    ListViewë³´ë‹¤ íš¨ìœ¨ì ì´ê³  í™•ì¥ì„±ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.

---

**Q2) RecyclerViewì—ì„œ ìŠ¤í¬ë¡¤ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì–´ë–¤ ì „ëµì„ ì‚¬ìš©í•˜ë‚˜ìš”**

**A)**  
  1. ViewHolderì—ì„œ findViewById() ëŒ€ì‹  **ViewBinding/ë°ì´í„°ë°”ì¸ë”©** ì‚¬ìš©  
  2. Glide/Picassoë¡œ ì´ë¯¸ì§€ ë¡œë”© ì‹œ **placeholder + ìºì‹± ì „ëµ** ì ìš©  
  3. `setHasFixedSize(true)`ë¡œ ì„±ëŠ¥ ìµœì í™”  
  4. DiffUtilë¡œ ë¶ˆí•„ìš”í•œ notify í˜¸ì¶œ ì œê±°  
  5. RecyclerViewPool ì¬ì‚¬ìš©ìœ¼ë¡œ ì¤‘ì²© ë¦¬ìŠ¤íŠ¸ ìµœì í™”

---

**Q3) RecyclerViewì—ì„œ ì—¬ëŸ¬ ViewTypeì„ ì²˜ë¦¬í•  ë•Œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œì™€ í•´ê²°ì±…ì€**

**A)**
  - ë¬¸ì œ: `position`ì„ ì§ì ‘ ë°ì´í„° ì¸ë±ìŠ¤ë¡œ ë§¤í•‘í•˜ë©´,  
    **í—¤ë”/í‘¸í„° ì¶”ê°€ ì‹œ ì¸ë±ìŠ¤ ì¶©ëŒ**ì´ ë°œìƒí•©ë‹ˆë‹¤.  
  - í•´ê²°ì±…:  
    1. **getItemViewType() + sealed class**ë¡œ ëª…ì‹œì  íƒ€ì… ë¶„ë¦¬  
    2. ë˜ëŠ” **ConcatAdapter**ë¥¼ ì‚¬ìš©í•´ ì–´ëŒ‘í„° ìì²´ë¥¼ ë¶„ë¦¬  
    3. í¬ì§€ì…˜ ê¸°ë°˜ ì ‘ê·¼ ëŒ€ì‹  **ë°ì´í„° ê°ì²´ ìì²´ë¥¼ ì½œë°±ì— ì „ë‹¬**  

---

### ğŸ§¾ ìš”ì•½
RecyclerViewëŠ” **RecycledViewPool + ViewHolder**ë¡œ **ì¸í”Œë ˆì´íŠ¸ ì˜¤ë²„í—¤ë“œì™€ ë©”ëª¨ë¦¬ í• ë‹¹ì„ ìµœì†Œí™”**í•˜ì—¬ ìŠ¤í¬ë¡¤ ì„±ëŠ¥ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤. `ListAdapter`/`DiffUtil`ì„ ì ‘ëª©í•˜ë©´ **ì„¸ë¶„í™”ëœ ë³€ê²½ë§Œ ë°˜ì˜**ë˜ì–´ ëŒ€ê·œëª¨ ë°ì´í„°ì—ì„œë„ íš¨ìœ¨ì ì¸ ì—…ë°ì´íŠ¸ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.:contentReference[oaicite:24]{index=24}
