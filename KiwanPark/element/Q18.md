## ğŸ“¦ Q18. Activity ë˜ëŠ” Fragment ê°„ì— ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì „ë‹¬í•˜ë‚˜ìš”?

---

### âœ… í•µì‹¬ ìš”ì•½

ì•ˆë“œë¡œì´ë“œ ì»´í¬ë„ŒíŠ¸ ê°„ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **Activity â†’ Activity**: `Intent.putExtra()` ì‚¬ìš©  
- **Fragment â†’ Fragment**: `Bundle`, `FragmentResult`, `SharedViewModel`, `Safe Args` ë“±  
- **Activity â†” Fragment**: `setArguments()` ë˜ëŠ” `ViewModel ê³µìœ `

---

### ğŸ“¦ Activity ê°„ ì „ë‹¬ (Bundle + Intent)

```kotlin
// Activity A â†’ Activity B
val intent = Intent(this, BActivity::class.java).apply {
    putExtra("key_string", "value")
    putExtra("key_int", 42)
}
startActivity(intent)

// Activity B
val value = intent.getStringExtra("key_string")
val number = intent.getIntExtra("key_int", 0)
```

- ë‚´ë¶€ì ìœ¼ë¡œ `putExtra()`ëŠ” ë°ì´í„°ë¥¼ `Bundle` í˜•íƒœë¡œ í¬ì¥í•˜ì—¬ ì „ë‹¬í•¨.

---

### ğŸ§© Fragment ê°„ ì „ë‹¬ ë°©ë²•

#### 1. `Bundle` + `arguments`

```kotlin
val fragment = TargetFragment().apply {
    arguments = Bundle().apply {
        putString("name", "John")
        putInt("age", 30)
    }
}
```

```kotlin
val name = arguments?.getString("name")
val age = arguments?.getInt("age")
```

- Fragment ìƒì„± ì‹œ `Bundle`ì— ë‹´ì•„ ì „ë‹¬í•˜ë©´ ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ê´€ë¦¬í•´ ì¤Œ.

---

#### 2. `SharedViewModel` ì‚¬ìš©

```kotlin
class SharedViewModel : ViewModel() {
    val userData = MutableStateFlow<String>("")
}

val viewModel: SharedViewModel by activityViewModels()

// Fragment A (ì „ë‹¬)
viewModel.userData.value = "Hello"

// Fragment B (ìˆ˜ì‹ )
lifecycleScope.launch {
    viewModel.userData.collectLatest { value -> 
        // UI ì—…ë°ì´íŠ¸
    }
}
```

- ë™ì¼í•œ Activity ë‚´ ì—¬ëŸ¬ Fragmentê°€ ë™ì¼ ViewModel ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ  ê°€ëŠ¥

---

#### 3. `FragmentResult API`

```kotlin
// Fragment A (ìˆ˜ì‹ )
setFragmentResultListener("requestKey") { _, bundle ->
    val result = bundle.getString("bundleKey")
}

// Fragment B (ì†¡ì‹ )
setFragmentResult("requestKey", bundleOf("bundleKey" to "Hello"))
```

- ë‹¨ë°©í–¥, ì¼íšŒì„± ì „ë‹¬ì— ì í•©. ìˆ˜ì‹  FragmentëŠ” STARTED ìƒíƒœì—¬ì•¼ í•¨.

---

#### 4. `Safe Args` (Navigation ì‚¬ìš© ì‹œ ì¶”ì²œ)

```xml
<fragment
    android:id="@+id/detailFragment"
    android:name="com.example.DetailFragment">
    <argument android:name="userId" app:argType="string" />
</fragment>
```

```kotlin
// ì „ì†¡
val action = FirstFragmentDirections.actionToDetail("john")
findNavController().navigate(action)

// ìˆ˜ì‹ 
val args: DetailFragmentArgs by navArgs()
val userId = args.userId
```

- íƒ€ì… ì•ˆì „ì„±ê³¼ ìë™ ì½”ë“œ ìƒì„±ì„ í†µí•´ ë²„ê·¸ ë°©ì§€ ë° ìƒì‚°ì„± í–¥ìƒ

---

### ğŸ¯ ì‹¤ì „ ì§ˆë¬¸

> Q) ë™ì¼í•œ Activity ë‚´ì—ì„œ Fragment ê°„ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ë•Œ ì–´ë–¤  
> ë°©ë²•ì´ íš¨ê³¼ì ì¸ì§€ ì„¤ëª…í•´ ì£¼ì‹œê³ , ViewModelì„ í™œìš©í•œë‹¤ë©´ Bundle  
> ì´ë‚˜ ì§ì ‘ì ì¸ Fragment íŠ¸ëœì­ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ë¹„êµí–ˆì„ ë•Œ ì–´ë–¤  
> ì´ì ì´ ìˆë‚˜ìš”

**ë‹µë³€ ì˜ˆì‹œ**:

- `SharedViewModel`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ì¥ íš¨ê³¼ì ì…ë‹ˆë‹¤.
- Bundleì€ ë¬¸ìì—´ ê¸°ë°˜ key-valueë¼ **íƒ€ì… ì•ˆì „ì„±ì´ ì—†ê³ **, **í™”ë©´ íšŒì „ ë“± êµ¬ì„± ë³€ê²½ ì‹œ ì†ì‹¤** ê°€ëŠ¥ì„±ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
- ë°˜ë©´ ViewModelì€ Activity ë²”ìœ„ë¡œ ìƒëª…ì£¼ê¸°ë¥¼ ê³µìœ í•˜ì—¬ êµ¬ì„± ë³€ê²½ì—ë„ ì•ˆì „í•˜ê³ , ë‹¨ë°©í–¥ ë°ì´í„° íë¦„ êµ¬ì„±ì—ë„ ìœ ë¦¬í•©ë‹ˆë‹¤.
- ë˜í•œ Fragment ê°„ ì§ì ‘ ì°¸ì¡° ì—†ì´ ëŠìŠ¨í•˜ê²Œ ê²°í•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### ğŸ’¡ Pro Tips for Mastery: FragmentResult API

| íŠ¹ì§• | ì„¤ëª… |
|------|------|
| êµ¬ì¡° | `setFragmentResult`ì™€ `setFragmentResultListener` ì‚¬ìš© |
| ì í•©í•œ ìƒí™© | ì¼íšŒì„± ì „ë‹¬, Dialog â†’ Fragment í†µì‹  |
| ì£¼ì˜ì‚¬í•­ | ìˆ˜ì‹  FragmentëŠ” ë°˜ë“œì‹œ `STARTED` ìƒíƒœì—¬ì•¼ í•¨ |

```kotlin
// ìˆ˜ì‹ ì
parentFragmentManager.setFragmentResultListener("key", viewLifecycleOwner) { _, bundle ->
    val result = bundle.getString("data")
}

// ì†¡ì‹ ì
parentFragmentManager.setFragmentResult("key", bundleOf("data" to "ì „ë‹¬ê°’"))
```

---

### ğŸ“Š Safe Args vs Bundle + ìƒìˆ˜(enum)

| í•­ëª© | Bundle + ìƒìˆ˜ | Safe Args |
|------|----------------|-----------|
| ì˜¤íƒ€ ë°©ì§€ | âœ… ê°€ëŠ¥ | âœ… ìë™ ìƒì„± |
| íƒ€ì… ì•ˆì •ì„± | âŒ ìºìŠ¤íŒ… í•„ìš” | âœ… ì»´íŒŒì¼ íƒ€ì„ í™•ì¸ |
| ë¦¬íŒ©í† ë§ | âŒ ìˆ˜ë™ ë°˜ì˜ | âœ… ìë™ ë°˜ì˜ |
| ê°€ë…ì„± | âŒ key ì¤‘ì‹¬ | âœ… ëª…ì‹œì  íŒŒë¼ë¯¸í„° |
| Navigation ì—°ë™ | âŒ ë³„ë„ ì²˜ë¦¬ | âœ… Directions ìë™ ìƒì„± |

```kotlin
// Bundle ë°©ì‹
val fragment = Fragment().apply {
    arguments = Bundle().apply {
        putString(Keys.USER_ID, "john")
    }
}

// Safe Args ë°©ì‹
val action = HomeFragmentDirections.actionHomeToDetail("john")
findNavController().navigate(action)
```

> ë‹¨ìˆœíˆ enumì´ë‚˜ constë¡œ í‚¤ë¥¼ ê³ ì •í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œëŠ” Safe Argsì˜ íƒ€ì… ì•ˆì •ì„±, ë¦¬íŒ©í† ë§ ëŒ€ì‘, ìë™í™” ê¸°ëŠ¥ì„ ì™„ì „íˆ ëŒ€ì²´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

---
