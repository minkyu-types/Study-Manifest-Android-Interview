## âœ… Q11. ContentProviderì˜ ëª©ì ì€ ë¬´ì—‡ì´ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ ê°„ì˜ ì•ˆì „í•œ ë°ì´í„° ê³µìœ ë¥¼ ì–´ë–»ê²Œ ìš©ì´í•˜ê²Œ í•˜ë‚˜ìš”?

---

### ğŸ“Œ ê°œìš”
`ContentProvider`ëŠ” ì•ˆë“œë¡œì´ë“œì˜ **4ëŒ€ ì»´í¬ë„ŒíŠ¸ ì¤‘ í•˜ë‚˜**ë¡œ, ì•± ê°„ êµ¬ì¡°í™”ëœ ë°ì´í„°ë¥¼ **ì•ˆì „í•˜ê³  ì¼ê´€ì„± ìˆê²Œ ê³µìœ **í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” **ì¤‘ì•™ ì§‘ì¤‘í˜• ì¸í„°í˜ì´ìŠ¤**ì…ë‹ˆë‹¤.

---

### ğŸ¯ ëª©ì 

- ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤(SQLite, íŒŒì¼, ë„¤íŠ¸ì›Œí¬ ë“±)ë¥¼ **ì¶”ìƒí™”**í•˜ì—¬ ì•± ê°„ ë˜ëŠ” ì•± ë‚´ë¶€ ëª¨ë“ˆ ê°„ **ë°ì´í„° ê³µìœ ë¥¼ ì•ˆì „í•˜ê²Œ ìº¡ìŠí™”**í•¨
- ë°ì´í„°ë¥¼ URI ê¸°ë°˜ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” **í‘œì¤€í™”ëœ í†µí•© ì¸í„°í˜ì´ìŠ¤**ë¥¼ ì œê³µí•¨
- Android ì‹œìŠ¤í…œ ê¸°ëŠ¥(ì˜ˆ: ì—°ë½ì²˜, ìº˜ë¦°ë”, ì‚¬ì§„ ì„ íƒ ë“±)ê³¼ **ìì—°ìŠ¤ëŸ½ê²Œ ì—°ë™ë˜ëŠ” ë°ì´í„° ë¸Œë¦¬ì§€ ì—­í• ** ìˆ˜í–‰
---

### ğŸ§© êµ¬ì„± ìš”ì†Œ

| êµ¬ì„± ìš”ì†Œ | ì„¤ëª… |
|-----------|------|
| Authority | Providerë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ëŠ” ì´ë¦„ (`com.example.myapp.provider`) |
| Path      | ë°ì´í„° í…Œì´ë¸” ë˜ëŠ” ì»¬ë ‰ì…˜ ì´ë¦„ (`/users`, `/products`) |
| ID        | ë‹¨ì¼ ë°ì´í„° ì‹ë³„ì (`/users/1`) |

---

### ğŸ—ï¸ êµ¬ì¡° ë° ì£¼ìš” ë©”ì„œë“œ

`ContentProvider`ë¥¼ ìƒì†í•˜ì—¬ ë‹¤ìŒ ë©”ì„œë“œë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤:

- `onCreate()` â€“ ì´ˆê¸°í™”
- `query()` â€“ ë°ì´í„° ì¡°íšŒ
- `insert()` â€“ ë°ì´í„° ì‚½ì…
- `update()` â€“ ë°ì´í„° ìˆ˜ì •
- `delete()` â€“ ë°ì´í„° ì‚­ì œ
- `getType()` â€“ MIME íƒ€ì… ë°˜í™˜

---

### ğŸ’» êµ¬í˜„ ì˜ˆì‹œ

**MyContentProvider.kt**
```kotlin
class MyContentProvider : ContentProvider() {

    private lateinit var database: SQLiteDatabase

    override fun onCreate(): Boolean {
        database = MyDatabaseHelper(context!!).writableDatabase
        return true
    }

    override fun query(
        uri: Uri,
        projection: Array<String>?,
        selection: String?,
        selectionArgs: Array<String>?,
        sortOrder: String?
    ): Cursor? {
        // URI íŒŒì‹± ë° í…Œì´ë¸”/ì¡°ê±´ ê²°ì • í•„ìš”
        return database.query("users", projection, selection, selectionArgs, null, null, sortOrder)
    }

    override fun insert(uri: Uri, values: ContentValues?): Uri? {
        val id = database.insert("users", null, values)
        // context?.contentResolver?.notifyChange(uri, null) // ë°ì´í„° ë³€ê²½ ì•Œë¦¼ (í•„ìš”ì‹œ)
        return ContentUris.withAppendedId(uri, id)
    }

    override fun update(uri: Uri, values: ContentValues?, selection: String?, selectionArgs: Array<String>?): Int {
        val count = database.update("users", values, selection, selectionArgs)
        // if (count > 0) context?.contentResolver?.notifyChange(uri, null) // ë°ì´í„° ë³€ê²½ ì•Œë¦¼ (í•„ìš”ì‹œ)
        return count
    }

    override fun delete(uri: Uri, selection: String?, selectionArgs: Array<String>?): Int {
        val count = database.delete("users", selection, selectionArgs)
        // if (count > 0) context?.contentResolver?.notifyChange(uri, null) // ë°ì´í„° ë³€ê²½ ì•Œë¦¼ (í•„ìš”ì‹œ)
        return count
    }

    override fun getType(uri: Uri): String? {
        // URIì— ë”°ë¥¸ MIME íƒ€ì… ë°˜í™˜ ë¡œì§ í•„ìš”
        return "vnd.android.cursor.dir/vnd.com.example.myapp.users"
    }
}
```

---

**AndroidManifest.xml ë“±ë¡**
```xml
<provider
    android:name=".MyContentProvider"
    android:authorities="com.example.myapp.provider"
    android:exported="true"
    android:grantUriPermissions="true" />
```

---

**ë°ì´í„° ì ‘ê·¼ ì˜ˆì‹œ**
```kotlin
val contentResolver = context.contentResolver

// ë°ì´í„° ì¿¼ë¦¬
val cursor = contentResolver.query(
    Uri.parse("content://com.example.myapp.provider/users"),
    null, null, null, null
)

// ë°ì´í„° ì‚½ì…
val values = ContentValues().apply {
    put("name", "John Doe")
    put("email", "johndoe@example.com")
}
contentResolver.insert(Uri.parse("content://com.example.myapp.provider/users"), values)
```

---

### ğŸ›¡ï¸ ë³´ì•ˆ ê³ ë ¤ ì‚¬í•­

- `exported="false"` ë˜ëŠ” `android:permission`ì„ í†µí•´ ì™¸ë¶€ ì ‘ê·¼ ì œì–´
- URI ì ‘ê·¼ ê¶Œí•œì€ ëª…ì‹œì ìœ¼ë¡œ `grantUriPermissions="true"` ì„¤ì • í›„ Intentì—ì„œ `FLAG_GRANT_READ_URI_PERMISSION` ì„¤ì • í•„ìš”
- Android 7.0 ì´í›„ íŒŒì¼ ê³µìœ ëŠ” FileProvider ê¶Œì¥

---

### ğŸ’¡ ëŒ€í‘œ ì‚¬ìš© ì‚¬ë¡€
---

#### âœ… 1. ì•± ê°„ ë°ì´í„° ê³µìœ   
> ë‹¤ë¥¸ ì•±ì—ì„œ ì—°ë½ì²˜, ì‚¬ì§„, ì‚¬ìš©ì ë°ì´í„° ë“±ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ContentProviderë¡œ ë…¸ì¶œ

**Aì•± - Provider ë“±ë¡**
```xml
<provider
    android:name=".UserProvider"
    android:authorities="com.example.appa.provider"
    android:exported="true"
    android:grantUriPermissions="true" />
```

**Bì•± - ContentResolverë¡œ ì‚¬ìš©ì ëª©ë¡ ê°€ì ¸ì˜¤ê¸°**
```kotlin
val uri = Uri.parse("content://com.example.appa.provider/users")
val cursor = contentResolver.query(uri, null, null, null, null)
cursor?.use {
    while (it.moveToNext()) {
        val name = it.getString(it.getColumnIndexOrThrow("name"))
        Log.d("Bì•±", "ì‚¬ìš©ì ì´ë¦„: $name")
    }
}
```

---

#### âœ… 2. ì‹œìŠ¤í…œ ê¸°ëŠ¥ ì—°ë™  
> íŒŒì¼ ì„ íƒê¸°, ì´ë¯¸ì§€ ê³µìœ  ë“± ì‹œìŠ¤í…œ Intentì—ì„œ ContentProvider URIë¥¼ í™œìš©

**FileProvider ë“±ë¡**
```xml
<provider
    android:name="androidx.core.content.FileProvider"
    android:authorities="com.example.appa.fileprovider"
    android:exported="false"
    android:grantUriPermissions="true">
    <meta-data
        android:name="android.support.FILE_PROVIDER_PATHS"
        android:resource="@xml/file_paths" />
</provider>
```

**ì´ë¯¸ì§€ ê³µìœ ìš© URI ìƒì„±**
```kotlin
val file = File(context.cacheDir, "share.jpg")
val uri = FileProvider.getUriForFile(context, "com.example.appa.fileprovider", file)

val intent = Intent(Intent.ACTION_SEND).apply {
    type = "image/jpeg"
    putExtra(Intent.EXTRA_STREAM, uri)
    addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)
}
startActivity(Intent.createChooser(intent, "ì´ë¯¸ì§€ ê³µìœ "))
```

---

#### âœ… 3. ì•± ì´ˆê¸°í™” ëª©ì   
> Firebase SDK, analytics ë“±ì—ì„œ ì•± ì‹¤í–‰ ì „ ContentProviderì˜ `onCreate()`ë¥¼ ì´ìš©í•œ ì´ˆê¸°í™”

**ë¼ì´ë¸ŒëŸ¬ë¦¬ Provider ì˜ˆì‹œ**
```kotlin
class FirebaseInitProvider : ContentProvider() {
    override fun onCreate(): Boolean {
        Log.d("Firebase", "ì•± ì‹¤í–‰ ì „ ì´ˆê¸°í™” ì™„ë£Œ")
        FirebaseApp.initializeApp(context!!)
        return true
    }

    override fun query(...) = null
    override fun insert(...) = null
    override fun delete(...) = 0
    override fun update(...) = 0
    override fun getType(...) = null
}
```

**Manifest ë“±ë¡**
```xml
<provider
    android:name="com.google.firebase.provider.FirebaseInitProvider"
    android:authorities="com.google.firebase.initprovider"
    android:exported="false"
    android:initOrder="100" />
```

---

#### âœ… 4. ë³´ì•ˆ ë°ì´í„° ë¶„ë¦¬  
> ë¯¼ê°í•œ ì •ë³´ë¥¼ ë³„ë„ Providerë¡œ ê²©ë¦¬í•˜ê³ , ì ‘ê·¼ ê¶Œí•œì„ ì œí•œ

**Manifest ì„¤ì • (ê¶Œí•œ ì œí•œ)**
```xml
<provider
    android:name=".SecureProvider"
    android:authorities="com.example.appa.secureprovider"
    android:exported="true"
    android:readPermission="com.example.appa.PERMISSION_READ_SECURE"
    android:writePermission="com.example.appa.PERMISSION_WRITE_SECURE" />
```

**ê¶Œí•œ ì •ì˜**
```xml
<permission android:name="com.example.appa.PERMISSION_READ_SECURE"
    android:protectionLevel="signature" />
<permission android:name="com.example.appa.PERMISSION_WRITE_SECURE"
    android:protectionLevel="signature" />
```

**Bì•±ì—ì„œ ê¶Œí•œ ìš”ì²­**
```xml
<uses-permission android:name="com.example.appa.PERMISSION_READ_SECURE" />
```

**ë³´ì•ˆ ë°ì´í„° ì ‘ê·¼ ì˜ˆì‹œ**
```kotlin
val uri = Uri.parse("content://com.example.appa.secureprovider/sensitive")
val cursor = contentResolver.query(uri, null, null, null, null)
```


---

### ğŸ“ ìš”ì•½
- ContentProviderëŠ” ì•± ê°„ **ë°ì´í„° ê³µìœ ë¥¼ í‘œì¤€í™”**í•˜ê³ , **ë³´ì•ˆ í†µì œ ë° ì ‘ê·¼ ìº¡ìŠí™”**ì— ê°•ì ì„ ì§€ë‹Œ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.
- SQLite/íŒŒì¼ ì‹œìŠ¤í…œ ë“± ë‹¤ì–‘í•œ ì†ŒìŠ¤ë¥¼ í•˜ë‚˜ì˜ URI ì¸í„°í˜ì´ìŠ¤ë¡œ ì¶”ìƒí™”í•˜ë©°, `ContentResolver`ë¥¼ í†µí•´ ë°ì´í„°ì— ì ‘ê·¼í•©ë‹ˆë‹¤.
- Android ì‹œìŠ¤í…œê³¼ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©ë˜ë©°, íŠ¹íˆ ë³´ì•ˆê³¼ ì´ˆê¸°í™” íƒ€ì´ë° ì œì–´ ë“±ì—ì„œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë©ë‹ˆë‹¤.

---

### ğŸ’¬ ì‹¤ì „ ì§ˆë¬¸

## Q) ContentProvider URIì˜ ì£¼ìš” êµ¬ì„± ìš”ì†ŒëŠ” ë¬´ì—‡ì´ë©°, ContentResolverëŠ” ë°ì´í„°ë¥¼ ì¿¼ë¦¬í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ê¸° ìœ„í•´ ContentProviderì™€ ì–´ë–»ê²Œ ìƒí˜¸ ì‘ìš©í•˜ë‚˜ìš”?

---

### ğŸ“Œ 1. ContentProvider URIì˜ ì£¼ìš” êµ¬ì„± ìš”ì†Œ

ContentProviderëŠ” `content://`ë¡œ ì‹œì‘í•˜ëŠ” URIë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤. ì´ URIëŠ” ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì„± ìš”ì†Œë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤:

#### âœ… URI êµ¬ì„± í˜•ì‹

```
content://authority/path/id
```

| êµ¬ì„± ìš”ì†Œ | ì„¤ëª… | ì˜ˆì‹œ |
|-----------|------|------|
| `content://` | ContentProviderì˜ URI ìŠ¤í‚´ | `content://` |
| `authority` | ContentProviderë¥¼ ì‹ë³„í•˜ëŠ” ê³ ìœ  ì´ë¦„ (AndroidManifestì— ì„ ì–¸ë¨) | `com.example.myapp.provider` |
| `path` | í…Œì´ë¸” ë˜ëŠ” ë°ì´í„° ìœ í˜• (1ê°œ ì´ìƒì˜ ê²½ë¡œ ì„¸ê·¸ë¨¼íŠ¸) | `users`, `products` |
| `id` | íŠ¹ì • ë ˆì½”ë“œ ì‹ë³„ì (ì„ íƒì ) | `1`, `42` |

#### âœ… ì˜ˆì‹œ URI

```plaintext
content://com.example.myapp.provider/users       // users í…Œì´ë¸” ì „ì²´
content://com.example.myapp.provider/users/1     // IDê°€ 1ì¸ ì‚¬ìš©ì
```

---

### ğŸ§© 2. ContentResolverì™€ ContentProviderì˜ ìƒí˜¸ì‘ìš©

`ContentResolver`ëŠ” ì•±ì´ ContentProviderì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ì‹œìŠ¤í…œ APIì…ë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤:

1. ì•±ì´ `ContentResolver`ë¥¼ í†µí•´ íŠ¹ì • URIì— ì ‘ê·¼
2. Android ì‹œìŠ¤í…œì´ í•´ë‹¹ URIì˜ `authority`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ContentProviderë¥¼ ì°¾ì•„ëƒ„
3. ContentResolverëŠ” `query()`, `insert()`, `update()`, `delete()` ì¤‘ í•˜ë‚˜ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œ
4. ContentProviderê°€ ì ì ˆí•œ ë°ì´í„°ë¥¼ ë°˜í™˜ (`Cursor`, `Uri`, Int ë“±)

---

### ğŸ” 3. ì‹¤ì „ ì½”ë“œ ì˜ˆì‹œ: Aì•±ê³¼ Bì•± ê°„ ContentProvider ì—°ë™

---

#### ğŸ“¦ Aì•± (ì œê³µì)

##### âœ… 1. AndroidManifest.xmlì— ContentProvider ë“±ë¡

```xml
<provider
    android:name=".MyUserProvider"
    android:authorities="com.example.appa.provider"
    android:exported="true"
    android:grantUriPermissions="true" />
```

---

##### âœ… 2. ContentProvider í´ë˜ìŠ¤ ì •ì˜

```kotlin
class MyUserProvider : ContentProvider() {

    companion object {
        const val AUTHORITY = "com.example.appa.provider"
        val CONTENT_URI: Uri = Uri.parse("content://$AUTHORITY/users")
    }

    private lateinit var db: SQLiteDatabase

    override fun onCreate(): Boolean {
        db = context?.openOrCreateDatabase("user.db", Context.MODE_PRIVATE, null)!!
        db.execSQL(
            "CREATE TABLE IF NOT EXISTS users (" +
                    "id INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    "name TEXT, email TEXT)"
        )
        return true
    }

    override fun query(
        uri: Uri, projection: Array<out String>?, selection: String?,
        selectionArgs: Array<out String>?, sortOrder: String?
    ): Cursor {
        return db.query("users", projection, selection, selectionArgs, null, null, sortOrder)
    }

    override fun insert(uri: Uri, values: ContentValues?): Uri? {
        val id = db.insert("users", null, values)
        return ContentUris.withAppendedId(CONTENT_URI, id)
    }

    .
    .
    .
}
```

---

#### ğŸ“± Bì•± (ì†Œë¹„ì)

##### âœ… 1. Aì•±ì˜ ContentProviderë¡œë¶€í„° ë°ì´í„° ì¡°íšŒ

```kotlin
val uri = Uri.parse("content://com.example.appa.provider/users")
val cursor = contentResolver.query(uri, null, null, null, null)

cursor?.use {
    while (it.moveToNext()) {
        val name = it.getString(it.getColumnIndexOrThrow("name"))
        val email = it.getString(it.getColumnIndexOrThrow("email"))
        Log.d("Bì•±", "ì‚¬ìš©ì: $name, $email")
    }
}
```

---

##### âœ… 2. Aì•±ì˜ ContentProviderë¡œ ë°ì´í„° ì‚½ì…

```kotlin
val uri = Uri.parse("content://com.example.appa.provider/users")
val values = ContentValues().apply {
    put("name", "ê¹€ì² ìˆ˜")
    put("email", "kim@example.com")
}
val resultUri = contentResolver.insert(uri, values)
Log.d("Bì•±", "ì‚½ì…ëœ URI: $resultUri")
```

---

#### ğŸ” ë³´ì•ˆ íŒ

- Aì•±ì´ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ê³µìœ í•  ê²½ìš° `android:permission` ì†ì„±ì„ í†µí•´ íŠ¹ì • ê¶Œí•œì„ ê°€ì§„ ì•±ë§Œ ì ‘ê·¼í•˜ë„ë¡ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- Bì•±ì—ì„œëŠ” Aì•±ì˜ `authority`ë¥¼ ì •í™•íˆ ì•Œì•„ì•¼ í•˜ê³ , í•„ìš” ì‹œ Aì•±ì˜ ê¶Œí•œì„ `uses-permission`ìœ¼ë¡œ ì„ ì–¸í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### âœ… ìš”ì•½ ì •ë¦¬

| í•­ëª© | ì„¤ëª… |
|------|------|
| URI êµ¬ì¡° | `content://authority/path/id` í˜•ì‹ |
| `authority` | ContentProvider ì‹ë³„ì (Manifestì— ë“±ë¡) |
| `ContentResolver` | ContentProviderì— ì ‘ê·¼í•˜ëŠ” í‘œì¤€ API |
| ì£¼ìš” ë©”ì„œë“œ | `query()`, `insert()`, `update()`, `delete()` |
| ê²°ê³¼ ë°˜í™˜ | `Cursor`, `Uri`, `Int` ë“± |

---

### ğŸ§  Protips for Mastery: ContentProvider ë§ˆìŠ¤í„°ë¥¼ ìœ„í•œ ì‹¤ì „ íŒ

| ğŸ’¡ íŒ | ğŸ“ ì„¤ëª… |
|-------|---------|
| **ì•± ì´ˆê¸°í™” íŠ¸ë¦¬ê±°ë¡œ ì‚¬ìš©** | `ContentProvider`ëŠ” `Application`ë³´ë‹¤ ë¨¼ì € ì‹¤í–‰ë˜ë¯€ë¡œ, Firebase SDKë‚˜ Analytics ì´ˆê¸°í™”ì— ì í•©í•œ **ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ˆê¸° ì§„ì… ì§€ì **ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. |
| **LiveData + ContentObserver ì—°ê³„** | `ContentObserver`ë¥¼ `LiveData`ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´, ContentProvider ë°ì´í„° ë³€ê²½ì„ ê°ì§€í•˜ì—¬ **UIë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì‘í˜•ìœ¼ë¡œ êµ¬ì„±**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. |
| **ê¸°ì¡´ DB êµ¬ì¡° ì¬í™œìš©** | ê¸°ì¡´ SQLite êµ¬ì¡°ë¥¼ ê·¸ëŒ€ë¡œ í™œìš©í•˜ë©´ì„œë„ ContentProviderë¥¼ êµ¬í˜„í•˜ë©´, **ë‚´ë¶€ DBë¥¼ ìœ ì§€í•˜ë©´ì„œë„ ì™¸ë¶€ ì•±ì— ê³µìœ  ê°€ëŠ¥í•œ URI ì¸í„°í˜ì´ìŠ¤**ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. |
| **ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´** | `android:permission`ê³¼ `protectionLevel="signature"`ë¥¼ ì¡°í•©í•˜ë©´, ê°™ì€ ì„œëª…ì„ ê°€ì§„ ì•±ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆì–´ **ê°•ë ¥í•œ ë³´ì•ˆ ìˆ˜ì¤€ì„ êµ¬í˜„**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. |
| **FileProvider í™•ì¥ í™œìš©** | ì´ë¯¸ì§€, íŒŒì¼ ê³µìœ  ì‹œ `FileProvider`ë¥¼ ì‚¬ìš©í•˜ë©´ **file:// ë³´ì•ˆ ì´ìŠˆë¥¼ íšŒí”¼**í•˜ë©´ì„œ `Intent.ACTION_SEND`, íŒŒì¼ ì„ íƒê¸°, ì¹´ë©”ë¼ ë“±ê³¼ **ìì—°ìŠ¤ëŸ½ê²Œ ì—°ë™**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. |

---

ğŸ’¬ ì˜ˆì‹œ ì‘ë‹µ í…œí”Œë¦¿ (ë©´ì ‘ ëŒ€ë¹„):

> â€œContentProviderëŠ” ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ ê³µìœ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì•„ë‹ˆë¼, ì•± ì´ˆê¸°í™”ì˜ ì§„ì…ì ì´ë‚˜ ì‹¤ì‹œê°„ UI ì—…ë°ì´íŠ¸ì— í™œìš©ë  ë§Œí¼ í™•ì¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. íŠ¹íˆ LiveData + ContentObserver ì—°ê³„ë‚˜ FileProviderì™€ì˜ ì¡°í•©ì€ ì‹¤ë¬´ì—ì„œ ìì£¼ í™œìš©ë©ë‹ˆë‹¤.â€


## ğŸ”„ ì¶”ê°€ë¡œ ìƒê°í•´ë³¼ ì : Roomê³¼ ContentProviderì˜ ì—°ê³„ì„±

Roomì€ ì¼ë°˜ì ìœ¼ë¡œ ì•± ë‚´ë¶€ì—ì„œ ì•ˆì „í•˜ê³  í¸ë¦¬í•˜ê²Œ SQLite DBë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì¶”ìƒí™”ëœ ORM ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ **ì™¸ë¶€ ì•±ê³¼ ë°ì´í„° ê³µìœ ê°€ í•„ìš”í•  ê²½ìš°**ì—ëŠ” `ContentProvider`ì™€ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

---

### âœ… ì—°ê³„ ë°©ë²• ìš”ì•½

| í•­ëª© | ì„¤ëª… |
|------|------|
| **Room ë‚´ë¶€ DB â†’ ContentProvider ë˜í•‘** | `RoomDatabase` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ContentProvider ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ì—¬, `query()`, `insert()` ë“±ì— ì§ì ‘ ì—°ê²° ê°€ëŠ¥ |
| **ContentProviderë¥¼ í†µí•´ ì™¸ë¶€ ì•±ì— Room ë°ì´í„° ì œê³µ** | Roomì˜ DAOë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ê±°ë‚˜ Room DBì— ì—°ê²°ëœ Cursorë¥¼ ë°˜í™˜í•¨ìœ¼ë¡œì¨ **ì™¸ë¶€ ì•±ë„ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì¤‘ê°œ** ê°€ëŠ¥ |
| **LiveData í™œìš© ì‹œ ì™¸ë¶€ ì•± ì—°ê³„ ì£¼ì˜** | `LiveData`ëŠ” ë‚´ë¶€ UI ëª©ì ì´ë¯€ë¡œ ì™¸ë¶€ ì•±ì—ëŠ” ì‚¬ìš© ë¶ˆê°€ â†’ `Cursor` ê¸°ë°˜ì˜ ì‘ë‹µ ìœ ì§€ í•„ìš” |
| **Multi-thread ê³ ë ¤** | Roomì€ ë©”ì¸ìŠ¤ë ˆë“œ ì‘ì—…ì„ ì œí•œí•˜ë¯€ë¡œ, ContentProvider ë‚´ ì‘ì—…ì€ `runBlocking`, `suspend`, ë˜ëŠ” `Executors`ë¡œ ì•ˆì „í•˜ê²Œ ë¶„ë¦¬ í•„ìš” |

---

### ğŸ’¡ ì—°ê³„ ì˜ˆì‹œ êµ¬ì¡° (ê°œë…ë„)

```plaintext
[ ì™¸ë¶€ ì•± (B) ]
        â†“
 ContentResolver.query()
        â†“
[ Aì•±ì˜ ContentProvider ]
        â†“
 Room DAO ë˜ëŠ” SQLiteQuery
        â†“
 Cursor ê²°ê³¼ ë°˜í™˜
```

---

### ğŸš§ ì£¼ì˜ ì‚¬í•­

- Room DAOëŠ” ì¼ë°˜ì ìœ¼ë¡œ `Cursor`ë¥¼ ë°˜í™˜í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ContentProvider ë‚´ë¶€ì—ì„œëŠ” `SupportSQLiteDatabase` ë˜ëŠ” `query("SELECT ...")`ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ í•„ìš”í•  ìˆ˜ ìˆìŒ
- Room + LiveData êµ¬ì¡°ëŠ” ContentProvider ì™¸ë¶€ ê³µê°œì™€ëŠ” **ì§ì ‘ í˜¸í™˜ë˜ì§€ ì•ŠìŒ**
- ì™¸ë¶€ ì ‘ê·¼ì„ ê³ ë ¤í•œë‹¤ë©´ **Roomì˜ í¸ì˜ì„± + ContentProviderì˜ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë™ì‹œì— ë§Œì¡±ì‹œí‚¤ëŠ” êµ¬ì¡° ì„¤ê³„**ê°€ ì¤‘ìš”

---

ğŸ“Œ ê²°ë¡ :  
Roomì€ ë‚´ë¶€ ì•± ê°œë°œì—ëŠ” ê°•ë ¥í•˜ì§€ë§Œ, ì™¸ë¶€ ì•±ê³¼ì˜ ì•ˆì „í•œ ë°ì´í„° ê³µìœ ì—ëŠ” ContentProviderê°€ í•„ìˆ˜ì…ë‹ˆë‹¤. ë”°ë¼ì„œ **"Roomì€ ì•± ë‚´ë¶€, ContentProviderëŠ” ì•± ì™¸ë¶€ì™€ì˜ ê³„ì•½"** ì´ë¼ëŠ” ê´€ì ìœ¼ë¡œ ì—­í• ì„ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
